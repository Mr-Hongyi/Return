@page "/retrospective/{retroId}/lobby"
@using Return.Application.Retrospectives.Queries.GetRetrospectiveStatus
@inherits RetrospectiveLobbyBase

@if (this.RetrospectiveStatus == null)
{
    @if (this.HasLoaded) {
        <ErrorMessage Text="This retrospective cannot be found!" />
    }

    return;
}

<h1 class="title has-text-centered">Retrospective: @this.RetrospectiveStatus.Title</h1>

<CascadingValue Value=@this.RetroIdObject IsFixed="true">
    <CascadingValue Value=@this.CurrentParticipant IsFixed="true">
        <CascadingValue Value=@this.RetrospectiveStatus>
            <CascadingValue Value=@this.Votes>
                <div class="columns">
                    <div class="column is-three-quarters">
                        <div class="columns">
                            @foreach (RetrospectiveLane lane in this.RetrospectiveStatus.Lanes)
                            {
                                <div class="column">
                                    <NoteLane @key="lane.Id" Lane="@lane" />
                                </div>
                            }
                        </div>
                    </div>

                    <div class="column">
                        <RetrospectiveOnlineList RetroId="@this.RetroId" CurrentParticipant="@this.CurrentParticipant" />

                        <RetrospectiveStatusPanel />
                    </div>
                </div>
            </CascadingValue>
        </CascadingValue>
    </CascadingValue>
</CascadingValue>